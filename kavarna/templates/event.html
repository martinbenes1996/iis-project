{% extends "page.html" %}

{% block content %}
<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
        <h1>{{event.name}}</h1>
    </div>
</div>
<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
        Cafe: 
	<form method="get" action="/cafe/">
            <input name="id" type="hidden" value="{{ event.place.pk }}" required />
            <button class="btn btn-link" type="Submit">{{event.place.name}}</button>
        </form>
    </div>
</div>
<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
        Price: {{event.price}}
    </div>
</div>
<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
        Capacity: {{event.capacity}}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
        <h3>Participants</h3>
    </div>
</div>
{% for participant in participants %}
<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
        {% include 'snippets/getbutton.html' with linkuser=participant %}
    </div>
</div>

{% endfor %}

<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center"> 
        {% if loggeduser %}
        {% if is_participant %}
            <form method="get" action="/deleteparticipateevent/">
                <input name="pk" type="hidden" value="{{ event.pk }}" required />
                <button class="btn btn-lg btn-warning" type="Submit">Stop participating</button>
            </form>
        {% else %}
            <form method="get" action="/participateevent/">
                <input name="pk" type="hidden" value="{{ event.pk }}" required />
                <button class="btn btn-lg btn-warning" type="Submit">Participate</button>
            </form>
        {% endif %}
        {% else %}
            You must <a href="{% url 'signin' %}">sign in</a> in order to participate.
        {% endif %}
    </div>
</div>    

<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
        <h3>Coffee</h3>
    </div>
</div>
{% for cofe in coffee %}
<div class="row" style="margin-top: 20px">
    <div class="col-lg text-center">
	<table align="center"><tr><td>	
	<form method="get" action="/coffee/">
            <input name="id" type="hidden" value="{{ cofe.pk }}" required />
            <button class="btn btn-link" type="Submit">{{cofe.name}}</button>
        </form></td>
    
    {% if loggeduser == event.place.owner %}
        <td>
	<form method="get" action="/deletecoffeeevent/">
            <input name="pk_coffee" type="hidden" value="{{ cofe.pk }}" required />
	    <input name="pk_event" type="hidden" value="{{ event.pk }}" required />
            <button type="Submit">Delete</button>
        </form></td>
    </div>
    {% endif %}</tr></table>
</div>
{% endfor %}


{% if loggeduser == event.place.owner %}
<!-- Adding coffee to event -->
<div class="row text-center" style="margin-top: 20px">
    <div class="col-lg text-center">
	<form method="get" action="/addcoffeeevent/">
            <input name="pk" type="hidden" value="{{ event.pk }}" required />
	    <table align="center"><tr><td>
    		Coffee:</td><td>
    		<select name="coffee">
	    	    {% for cof in all_coffee %}
	            	<option value="{{ cof.pk }}">{{ cof.name }}</option>
	    	    {% endfor %}
    		</select></td><td>
            	<button type="Submit">Add coffee to event</button></td></tr>
	    </table>
        </form>
    </div>
</div>
{% endif %}

<!--
<div class="row text-center" style="margin-top: 20px">
    <div class="col">
        <form method="get" action="/cafe_coffee/">
            <input name="id" type="hidden" value="{{ cafe.pk }}" required />
            <button class="btn btn-link" type="Submit">BACK</button>
        </form>
    </div>
</div>-->
{% endblock %}
